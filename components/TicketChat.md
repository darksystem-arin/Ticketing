
# مستندات کامپوننت `TicketChat.tsx`

این کامپوننت رابط کاربری چت برای یک تیکت مشخص را فراهم می‌کند. کاربران و کارشناسان می‌توانند در این صفحه پیام‌ها را مشاهده کرده، پیام جدید ارسال کنند و فایل پیوست نمایند.

## وظایف اصلی

1.  **نمایش هدر تیکت**: اطلاعات اصلی تیکت مانند **عنوان**، **شناسه** و **وضعیت فعلی** را در هدر صفحه نمایش می‌دهد.
2.  **نمایش تاریخچه چت**: تمام پیام‌های رد و بدل شده در تیکت را به ترتیب زمانی نمایش می‌دهد.
    *   پیام‌های ارسال شده توسط کاربر فعلی در یک سمت صفحه (مثلاً راست) و پیام‌های طرف مقابل در سمت دیگر نمایش داده می‌شوند تا خوانایی گفتگو افزایش یابد.
    *   نام فرستنده و زمان ارسال هر پیام نیز مشخص است.
3.  **اسکرول خودکار**: با ارسال یا دریافت پیام جدید، صفحه به صورت خودکار به آخرین پیام اسکرول می‌شود تا کاربر همیشه جدیدترین پیام را ببیند.
4.  **ارسال پیام و فایل**:
    *   یک فیلد ورودی متن برای نوشتن پیام جدید فراهم می‌کند.
    *   امکان ضمیمه کردن فایل را دارد. فرآیند آپلود فایل شبیه‌سازی شده و پیش‌نمایش فایل ضمیمه‌شده قبل از ارسال نمایش داده می‌شود.
5.  **مدیریت دسترسی**:
    *   اگر کاربر دسترسی پاسخ (`canReply`) نداشته باشد، فیلد ورودی غیرفعال می‌شود.
    *   اگر تیکت در وضعیت `بسته شده` باشد، امکان ارسال پیام جدید وجود نخواهد داشت.
6.  **بستن تیکت**: برای کاربران ادمین یا کارشناس، دکمه‌ای برای بستن تیکت نمایش داده می‌شود.
7.  **ناوبری**: یک دکمه "بازگشت" برای برگشتن به لیست تیکت‌ها (`TicketList`) وجود دارد.

## Props (ورودی‌ها)

| نام Prop        | نوع                                                              | توضیحات                                                                                    |
| :-------------- | :--------------------------------------------------------------- | :----------------------------------------------------------------------------------------- |
| `ticket`        | `Ticket`                                                         | آبجکت کامل تیکتی که چت آن در حال نمایش است.                                                |
| `onBack`        | `() => void`                                                     | تابعی برای مدیریت رویداد کلیک دکمه بازگشت.                                                 |
| `onSendMessage` | `(ticketId: string, text: string, attachment?: any) => void` | تابعی که هنگام ارسال یک پیام جدید فراخوانی می‌شود.                                          |
| `onCloseTicket` | `(ticketId: string) => void`                                     | تابعی که با کلیک بر روی دکمه "بستن تیکت" فراخوانی می‌شود.                                    |
| `role`          | `UserRole`                                                       | نقش کاربر فعلی برای تمایز پیام‌های ارسالی و دریافتی.                                       |
| `canReply`      | `boolean`                                                        | مشخص می‌کند که آیا کاربر فعلی اجازه ارسال پاسخ در این تیکت را دارد یا خیر.                   |
